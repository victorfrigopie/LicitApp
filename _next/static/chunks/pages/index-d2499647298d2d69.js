(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3454:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(7663)},5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7052)}])},9951:function(e,t,r){"use strict";r.d(t,{Z:function(){return ResultList}});var n=r(5893);function ResultList(e){let{items:t}=e;return t&&0!==t.length?(0,n.jsxs)("table",{className:"min-w-full text-sm table-auto border-collapse",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"bg-gray-200",children:[(0,n.jsx)("th",{className:"px-2 py-1 text-left",children:"T\xedtulo"}),(0,n.jsx)("th",{className:"px-2 py-1 text-left",children:"\xd3rgano"}),(0,n.jsx)("th",{className:"px-2 py-1 text-left",children:"Provincia"}),(0,n.jsx)("th",{className:"px-2 py-1 text-left",children:"L\xedmite"}),(0,n.jsx)("th",{className:"px-2 py-1 text-left",children:"Enlace"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{className:"border-b",children:[(0,n.jsx)("td",{className:"px-2 py-1 max-w-xs truncate",title:e.titulo,children:e.titulo}),(0,n.jsx)("td",{className:"px-2 py-1",title:e.organo,children:e.organo}),(0,n.jsx)("td",{className:"px-2 py-1",children:e.provincia||e.ccaa}),(0,n.jsx)("td",{className:"px-2 py-1",children:e.fechaLimite||"-"}),(0,n.jsx)("td",{className:"px-2 py-1 text-blue-600 underline",children:e.enlace?(0,n.jsx)("a",{href:e.enlace,target:"_blank",rel:"noopener noreferrer",children:"Ver"}):"-"})]},e.id))})]}):(0,n.jsx)("p",{children:"No se encontraron licitaciones que coincidan con tu b\xfasqueda."})}r(7294)},7052:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var n=r(5893),a=r(7294),o=r(9951),i=r(3454);function Home(){let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[p,f]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("".concat(i.env.NEXT_PUBLIC_BASE_PATH||"","/data/tenders-active.json"),{cache:"no-store"});if(!e.ok)throw Error("No se pudieron cargar los datos");let r=await e.json();t(r)}catch(e){h(e.message)}finally{f(!1)}}()},[]);let x=(0,a.useMemo)(()=>{let t=new Set;return e.forEach(e=>{e.provincia?t.add(e.provincia):e.ccaa&&t.add(e.ccaa)}),Array.from(t).sort()},[e]),v=(0,a.useMemo)(()=>e.filter(e=>{if(s){let t=(e.provincia||e.ccaa||"").toLowerCase();if(!t.includes(s.toLowerCase()))return!1}if(u){let t=e.importe||0;if(t<parseFloat(u))return!1}if(r){let t=r.toLowerCase(),n=e.titulo&&e.titulo.toLowerCase().includes(t)||e.organo&&e.organo.toLowerCase().includes(t)||e.cpv&&e.cpv.toLowerCase().includes(t);if(!n)return!1}return!0}).sort((e,t)=>{let r=new Date(e.fechaLimite||e.fechaPublicacion||0),n=new Date(t.fechaLimite||t.fechaPublicacion||0);return r-n}),[e,r,s,u]);return(0,n.jsxs)("div",{className:"max-w-5xl mx-auto p-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"LicitApp"}),(0,n.jsx)("p",{className:"mb-4",children:"Busca y filtra licitaciones p\xfablicas de Espa\xf1a de manera gratuita. Introduce palabras clave o selecciona una provincia para empezar."}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mb-6",children:[(0,n.jsx)("input",{type:"text",placeholder:"Buscar...",className:"border p-2 rounded w-full",value:r,onChange:e=>c(e.target.value)}),(0,n.jsxs)("select",{className:"border p-2 rounded w-full",value:s,onChange:e=>l(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Todas las provincias"}),x.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("input",{type:"number",min:"0",placeholder:"Importe m\xednimo (€)",className:"border p-2 rounded w-full",value:u,onChange:e=>d(e.target.value)})]}),p&&(0,n.jsx)("p",{children:"Cargando datos…"}),m&&(0,n.jsx)("p",{className:"text-red-600",children:m}),!p&&!m&&(0,n.jsx)(o.Z,{items:v})]})}},7663:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var o=[],i=!1,c=-1;function cleanUpNextTick(){i&&n&&(i=!1,n.length?o=n.concat(o):c=-1,o.length&&drainQueue())}function drainQueue(){if(!i){var e=runTimeout(cleanUpNextTick);i=!0;for(var t=o.length;t;){for(n=o,o=[];++c<t;)n&&n[c].run();c=-1,t=o.length}n=null,i=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new Item(e,t)),1!==o.length||i||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=noop,a.addListener=noop,a.once=noop,a.off=noop,a.removeListener=noop,a.removeAllListeners=noop,a.emit=noop,a.prependListener=noop,a.prependOnceListener=noop,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},o=!0;try{t[e](a,a.exports,__nccwpck_require__),o=!1}finally{o&&delete r[e]}return a.exports}__nccwpck_require__.ab="//";var n=__nccwpck_require__(229);e.exports=n}()}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);